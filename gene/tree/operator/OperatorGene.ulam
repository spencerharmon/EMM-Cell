element OperatorGene : QOperator{
  //typedefs (override complains unknown type <0Holder>, so we have to tell it explicitly)
  typedef QTree.GeneID GeneID;
  typedef QTree.TreeID TreeID;
  typedef QOperator.OperatorType OperatorType;
  typedef QTree.TreeID TreeID;
  //data members
  TreeID treeID;
  GeneID geneID;

  GeneID tree0;
  GeneID tree1;
  OperatorType op;

  StoredValue value;
  
  Atom createRandom(TreeID t, GeneID g, GeneID t0, GeneID t1){
    OperatorGene og;
    og.treeID = t;
    og.geneID = g;
    og.tree0 = t0;
    og.tree1 = t1;
    OperatorType max = OperatorType.maxof;
    og.op = (OperatorType) r.create(max);
    return og.atomof;
  }

  @Override StoredValue & getStoredValue(){
    return value;
  }
  @Override TreeID & getTreeID(){
    return treeID;
  }
  @Override GeneID & getGeneID(){
    return geneID;
  }
  @Override GeneID & getTree0(){
    return tree0;
  }
  @Override GeneID & getTree1(){
    return tree1;
  }
  @Override Atom getPhaseOneIntermediate(){
    OperatorCopy oc;
    oc.treeID = treeID;
    oc.geneID = geneID;
    oc.tree0 = tree0;
    oc.tree1 = tree1;
    oc.op = op;
    return oc.atomof;
  }
}